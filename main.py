#chief gear

# A HUGE CHANGE

chief_gear_tiers= [
    {"tier":"green", "upgrade_cost": [1500,15,0,0], "stat_gain": 0.0935},
    {"tier":"green_1*", "upgrade_cost": [3800,40,0,0], "stat_gain": 0.0340},
    {"tier": "blue", "upgrade_cost": [7000,70,0,0], "stat_gain": 0.0425},
    {"tier": "blue_1*", "upgrade_cost": [9700,95,0,0], "stat_gain": 0.0425},
    {"tier": "blue_2*", "upgrade_cost": [0,0,45,0], "stat_gain": 0.0425},
    {"tier": "blue_3*", "upgrade_cost": [0,0,50,0], "stat_gain": 0.0425},
    {"tier": "purple", "upgrade_cost": [0,0,60,0], "stat_gain": 0.0425},
    {"tier": "purple_1*", "upgrade_cost": [0,0,70,0], "stat_gain": 0.0289},
    {"tier": "purple_2*", "upgrade_cost": [6500,65,40,0], "stat_gain": 0.0289},
    {"tier": "purple_3*", "upgrade_cost": [8000,80,50,0], "stat_gain": 0.0289},
    {"tier": "purple_t1", "upgrade_cost": [10000,95,60,0], "stat_gain": 0.0289},
    {"tier": "purple_t1_1*", "upgrade_cost": [11000,110,70,0], "stat_gain": 0.0289},
    {"tier": "purple_t1_2*", "upgrade_cost": [13000,130,85,0], "stat_gain": 0.0289},
    {"tier": "purple_t1_3*", "upgrade_cost": [15000,160,100,0], "stat_gain": 0.0289},
    {"tier": "gold", "upgrade_cost": [22000,220,40,0], "stat_gain": 0.0255},
    {"tier": "gold_1*", "upgrade_cost": [23000,230,40,0], "stat_gain": 0.0255},
    {"tier": "gold_2*", "upgrade_cost": [25000,250,45,0], "stat_gain": 0.0255},
    {"tier": "gold_3*", "upgrade_cost": [26000,260,45,0], "stat_gain": 0.0255},
    {"tier": "gold_t1", "upgrade_cost": [28000,280,45,0], "stat_gain": 0.0255},
    {"tier": "gold_t1_1*", "upgrade_cost": [30000,300,55,0], "stat_gain": 0.0255},
    {"tier": "gold_t1_2*", "upgrade_cost": [32000,320,55,0], "stat_gain": 0.0255},
    {"tier": "gold_t1_3*", "upgrade_cost": [35000,340,55,0], "stat_gain": 0.0255},
    {"tier": "gold_t2", "upgrade_cost": [38000,360,55,0], "stat_gain": 0.0255},
    {"tier": "gold_t2_1*", "upgrade_cost": [43000,430,75,0], "stat_gain": 0.0255},
    {"tier": "gold_t2_2*", "upgrade_cost": [45000,460,80,0], "stat_gain": 0.0255},
    {"tier": "gold_t2_3*", "upgrade_cost": [48000,500,85,0], "stat_gain": 0.0272},
    {"tier": "red", "upgrade_cost": [50000,530,85,10], "stat_gain": 0.0425},
    {"tier": "red_1*", "upgrade_cost": [52000,560,90,10], "stat_gain": 0.0425},
    {"tier": "red_2*", "upgrade_cost": [54000,590,95,10], "stat_gain": 0.0425},
    {"tier": "red_3*", "upgrade_cost": [56000,620,100,10], "stat_gain": 0.0425},
    {"tier": "red_t1", "upgrade_cost": [59000,670,110,15], "stat_gain": 0.0425},
    {"tier": "red_t1_1*", "upgrade_cost": [61000,700,115,15], "stat_gain": 0.0425},
    {"tier": "red_t1_2*", "upgrade_cost": [63000,730,120,15], "stat_gain": 0.0425},
    {"tier": "red_t1_3*", "upgrade_cost": [65000,760,125,15], "stat_gain": 0.0425},
    {"tier": "red_t2", "upgrade_cost": [68000,810,135,20], "stat_gain": 0.0425},
    {"tier": "red_t2_1*", "upgrade_cost": [70000,840,140,20], "stat_gain": 0.0425},
    {"tier": "red_t2_2*", "upgrade_cost": [72000,870,145,20], "stat_gain": 0.0425},
    {"tier": "red_t2_3*", "upgrade_cost": [74000,900,150,20], "stat_gain": 0.0425},
    {"tier": "red_t3", "upgrade_cost": [77000,950,160,25], "stat_gain": 0.0425},
    {"tier": "red_t3_1*", "upgrade_cost": [80000,990,165,25], "stat_gain": 0.0425},
    {"tier": "red_t3_2*", "upgrade_cost": [83000,1030,170,25], "stat_gain": 0.0425},
    {"tier": "red_t3_3*", "upgrade_cost": [86000,1070,180,25], "stat_gain": 0.0425},
]

set_bonuses = [
    {"tier": "green", "three_piece_bonus": 2.00, "six_piece_bonus": 2.00},
    {"tier": "green_1*", "three_piece_bonus": 2.50, "six_piece_bonus": 2.50},
    {"tier": "blue", "three_piece_bonus": 3.00, "six_piece_bonus": 3.00},
    {"tier": "blue_1*", "three_piece_bonus": 3.50, "six_piece_bonus": 3.50},
    {"tier": "blue_2*", "three_piece_bonus": 4.00, "six_piece_bonus": 4.00},
    {"tier": "blue_3*", "three_piece_bonus": 4.50, "six_piece_bonus": 4.50},
    {"tier": "purple", "three_piece_bonus": 5.00, "six_piece_bonus": 5.00},
    {"tier": "purple_t1", "three_piece_bonus": 6.00, "six_piece_bonus": 6.00},
    {"tier": "gold", "three_piece_bonus": 7.00, "six_piece_bonus": 7.00},
    {"tier": "gold_t1", "three_piece_bonus": 8.00, "six_piece_bonus": 8.00},
    {"tier": "gold_t2", "three_piece_bonus": 9.00, "six_piece_bonus": 9.00},
    {"tier": "red", "three_piece_bonus": 10.00, "six_piece_bonus": 10.00},
    {"tier": "red_t1", "three_piece_bonus": 12.00, "six_piece_bonus": 12.00},
    {"tier": "red_t2", "three_piece_bonus": 14.00, "six_piece_bonus": 14.00},
    {"tier": "red_t3", "three_piece_bonus": 16.00, "six_piece_bonus": 16.00},
]

for tier in chief_gear_tiers:
    try:
        sub1 = tier["stat_gain"]/tier["upgrade_cost"][0]
    except:
        sub1 = 0
    try:
        sub2 = tier["stat_gain"]/tier["upgrade_cost"][1]
    except:
        sub2 = 0
    try:
        sub3 = tier["stat_gain"]/tier["upgrade_cost"][2]
    except:
        sub3 = 0
    try:
        sub4 = tier["stat_gain"]/tier["upgrade_cost"][3]
    except:
        sub4 = 0
    score = sub1 + sub2 + sub3 + sub4
    print(tier["tier"], round(score*100, 2))
class GearUpgrade:
    def __init__(self, tier, upgrade_cost, stat_gain):
        self.tier = tier
        self.alloy = upgrade_cost[0]
        self.solution = upgrade_cost[1]
        self.design = upgrade_cost[2]
        self.amber = upgrade_cost[3]
        self.stat_gain = stat_gain
        self.stat_per_alloy = stat_gain / upgrade_cost[0]
        self.stat_per_solution = stat_gain / upgrade_cost[1]
        self.stat_per_design = stat_gain / upgrade_cost[2]
        self.stat_per_amber = stat_gain / upgrade_cost[3]




weight_alloy = available_alloy / total_alloy
weight_plans = available_plans / total_plans
weight_solution = available_solution / total_solution
weight_amber = available_amber / total_amber


score = (
        (self.stat_per_alloy * weight_alloy) +
        (self.stat_per_solution * weight_solution) +
        (self.stat_per_design * weight_plans)+
        (self.stat_per_amber * weight_amber)
)


class FactoryUpgrade:
    def __init__(self, name, current_tier, next_tier_speed_gain, cost_money, cost_people, cost_fuel):
        self.name = name
        self.current_tier = current_tier
        self.next_tier_speed_gain = next_tier_speed_gain
        self.cost_money = cost_money
        self.cost_people = cost_people
        self.cost_fuel = cost_fuel
        self.speed_per_euro = next_tier_speed_gain / cost_money
        self.speed_per_person = next_tier_speed_gain / cost_people
        self.speed_per_fuel = next_tier_speed_gain / cost_fuel

    def efficiency_score(self, available_money, available_people, available_fuel, total_money, total_people,
                         total_fuel):
        # Calculate weighted score based on the availability of resources
        weight_money = available_money / total_money
        weight_people = available_people / total_people
        weight_fuel = available_fuel / total_fuel

        score = (
                (self.speed_per_euro * weight_money) +
                (self.speed_per_person * weight_people) +
                (self.speed_per_fuel * weight_fuel)
        )
        return score


def allocate_resources(factories, total_money, total_people, total_fuel):
    available_money = total_money
    available_people = total_people
    available_fuel = total_fuel
    total_speed_gain = 0
    upgrade_path = []

    while True:
        # Calculate efficiency scores for all possible upgrades
        scores = []
        for factory in factories:
            if factory.cost_money <= available_money and factory.cost_people <= available_people and factory.cost_fuel <= available_fuel:
                score = factory.efficiency_score(available_money, available_people, available_fuel, total_money,
                                                 total_people, total_fuel)
                scores.append((score, factory))

        # If no more upgrades are possible, break
        if not scores:
            break

        # Pick the upgrade with the highest score
        scores.sort(reverse=True, key=lambda x: x[0])  # Sort by score, descending
        best_upgrade = scores[0][1]

        # Perform the upgrade
        available_money -= best_upgrade.cost_money
        available_people -= best_upgrade.cost_people
        available_fuel -= best_upgrade.cost_fuel
        total_speed_gain += best_upgrade.next_tier_speed_gain
        upgrade_path.append(best_upgrade.name)

        # Remove the upgrade from the factory list (assuming we can't upgrade it again in this scenario)
        factories.remove(best_upgrade)

    return total_speed_gain, upgrade_path


# Example data (factories with current tier, speed gain, and costs)
factories = [
    FactoryUpgrade("A.1", current_tier=1, next_tier_speed_gain=10, cost_money=10000, cost_people=100, cost_fuel=300),
    FactoryUpgrade("A.2", current_tier=2, next_tier_speed_gain=15, cost_money=15000, cost_people=150, cost_fuel=400),
    FactoryUpgrade("B.1", current_tier=1, next_tier_speed_gain=10, cost_money=10000, cost_people=100, cost_fuel=300),
    FactoryUpgrade("B.2", current_tier=2, next_tier_speed_gain=15, cost_money=15000, cost_people=150, cost_fuel=400),
    FactoryUpgrade("C.1", current_tier=1, next_tier_speed_gain=10, cost_money=10000, cost_people=100, cost_fuel=300),
    FactoryUpgrade("C.2", current_tier=3, next_tier_speed_gain=20, cost_money=20000, cost_people=200, cost_fuel=500)
]

# Available resources
total_money = 100000  # euros
total_people = 1000  # people
total_fuel = 3000  # liters of fuel

# Allocate resources
total_speed_gain, upgrade_path = allocate_resources(factories, total_money, total_people, total_fuel)

# Output the results
print(f"Total Speed Gain: {total_speed_gain}%")
print("Upgrades Path:", upgrade_path)
